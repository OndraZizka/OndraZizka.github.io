<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>„Ternary boolean logic“ in SQL – making NULL useful - Ondřej Žižka</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="My personal web">
    <meta name="author" content="Ondřej Žižka">
    <meta name="generator" content="JBake">


    <link rel="stylesheet" href="../../../css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../css/asciidoctor.css">
    <link rel="stylesheet" href="../../../css/base.css">
    <link rel="stylesheet" href="../../../css/doc-body.css">
    <link rel="stylesheet" href="../../../css/prettify.css">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="../../../favicon.ico">
</head>
<body onload="prettyPrint()">
    <div id="wrap">

	<!-- Fixed navbar -->
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://www.zizka.ch/">Ondřej Žižka</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="../../../index.html">Blog</a></li>
            <li><a href="../../../archive.html">Archive</a></li>
            <li><a href="../../../tags">Tags</a></li>

            <li><a href="../../../about.html">About Me</a></li>
            <li><a href="../../../feed.xml">RSS feed</a></li>
            <li><a href="../../../sitemap.xml">Sitemap</a></li>
            <!--
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li class="divider"></li>
                <li class="dropdown-header">Nav header</li>
                <li><a href="#">Separated link</a></li>
                <li><a href="#">One more separated link</a></li>
              </ul>
            </li>
            -->
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
    <div class="container">

	<div class="page-header">
        <h1>„Ternary boolean logic“ in SQL – making NULL useful - Ondřej Žižka</h1>
	</div>

	<div class="date"><em>2012-12-31</em></div>

	<div class="doc-body"><h3>„Ternary boolean logic“ in SQL – making NULL useful</h3>

<p>Typically, SQL's <code>NULL</code> is used as „unknown value“ or „Not
Applicable“.</p>

<p>For example, you have a table of users who may provide their e-mail, but if
they don't, you store <code>NULL</code> to the e-mail column. That's
„uknown“.</p>

<p>Other usage example is a column with last user's forum post. But before his
first post, you store NULL there to mark there's no post yet.</p>

<p>That's the basic NULL usage. But it can provide you much more – mainly
for complex <code>SELECT</code>s used for searching or for reports.</p>

<h4>NULL features and performance</h4>

<p>On most enterprise-ready RDBMS's, NULL can be indexed.</p>

<p>On some, it also has some special features like MySQL's
<code>PRIMARY KEY AUTO_INCREMENT</code> or
<code>TIMESTAMP</code>'s auto-updating feature.</p>

<p>Storage space for a <code>NULL</code>able column is usually one bit, but
these bits are grouped in a byte-aligned field per row, which means, 1 to
8 null columns will occupy 1 byte per row, 9–16 will take
2 bytes, etc.</p>

<p><code>SELECT</code>ing the rows (not) having a <code>NULL</code> value is
usually very quick, because this information is part of the index; more, the
database system does not have to sort them internally in a tree index, like it
has with concrete values (e.g. numeric ID's).</p>

<h4>Basic NULL constructs in SQL</h4>

<ul>
	<li><code>SELECT a IS NULL</code></li>

	<li><code>SELECT a IS NOT NULL</code></li>

	<li><code>SELECT ISNULL(a)</code></li>

	<li><code>SELECT IFNULL(a, 'default')</code> returns <code>'default'</code> if
	<code>a</code> is <code>NULL</code>.</li>

	<li><code>SELECT COALESCE(a, b, c)</code> returns the first
	non-<code>NULL</code> value.</li>
</ul>

<h4>NULL semantics</h4>

<p>Null has these characteristics:</p>

<p>Most operations with null result in a NULL.</p>

<ul>
	<li><code>'' + NULL</code> ⇒ <code>NULL</code></li>

	<li><code>0 + NULL</code> ⇒ <code>NULL</code></li>

	<li><code>NOT NULL</code> ⇒ <code>NULL</code></li>
</ul>

<h5>Comparison</h5>

<p>Comparison always returns <code>NULL</code>, even for
<code>NULL = NULL</code>. You have to use <code>IS NULL</code>.</p>

<ul>
	<li><code>'' = NULL</code> ⇒ <code>NULL</code></li>

	<li><code>0 = NULL</code> ⇒ <code>NULL</code></li>

	<li><code>NULL = NULL</code> ⇒ <code>NULL</code></li>
</ul>

<p>There's also a null-safe comparison operator, <code>&lt;=&gt;</code>, which
behaves like this:</p>

<ul>
	<li><code>1 &lt;=&gt; 1</code> ⇒ <code>1</code></li>

	<li><code>NULL &lt;=&gt; NULL</code> ⇒ <code>1</code></li>

	<li><code>1 &lt;=&gt; NULL</code> ⇒ <code>0</code></li>
</ul>

<p>There are some <code>NULL</code>-related functions, which provide you a
convenient way when you need to work with multiple nullable values:</p>

<ul>
	<li><code>COALESCE()</code></li>

	<li><code>IFNULL()</code></li>

	<li><code>NULLIF()</code></li>
</ul>

<h5>Boolean logic</h5>

<p>Boolean logic is specific. Here, NULL is considered as meaning „Unknown
value“.</p>

<p><code>NULL AND 1</code> ⇒ <code>NULL</code> <code>NULL AND 0</code> ⇒
<code>0</code> <code>NULL OR 1</code> ⇒ <code>1</code> <code>NULL OR 0</code>
⇒ <code>NULL</code> <code>NULL XOR 1</code> ⇒ <code>NULL</code>
<code>NULL XOR 0</code> ⇒ <code>NULL</code></p>

<p>This makes sence, because with <code>AND</code>, you can tell the expression
will be false if one of operands is false. However, if one operand is true,
it's the other one which determines the result; so if it's unknown, the result
is unknown as well.<br />
Similarly it works with <code>OR</code>. For <code>XOR</code>, it's always
<code>NULL</code>, as both operands are always needed.</p>

<h4>Using NULL features to your advantage</h4>

<p>Without learning the basics above, the NULL behavior might seem strange to
you and can lead to an unexpected behavior. But if you keep that in mind, you
can make your complex <code>SELECT</code>s less complex by using some of the
following principles.</p>

<p><em>To be written later.</em></p>
</div>

	<hr />


    <!-- Facebook comments -->
        <div class="fb-comments" data-href="http://www.zizka.ch/pages/programovani/sql/sql_ternary_boolean_logic_with_null.html" data-width="800" data-numposts="5"></div>

    </div>
    <div id="push"></div>

    <div id="pocitadla" class="" style="position: relative; top: -64px; left: 4xp;">
        <!--
        <div class="pocitadlo" id="navrcholu">
            <script src="http://c1.navrcholu.cz/code?site=116753;t=lb14" type="text/javascript"></script><noscript><div><a target="_blank" href="http://navrcholu.cz/"><img src="http://c1.navrcholu.cz/hit?site=116753;t=lb14;ref=;jss=0" width="14" height="14" alt="Statistiky NaVrcholu.cz" style="border:none" /></a></div></noscript>
        </div><!- - Driv: code?site=79008;t=lb14" -->
        <div class="pocitadlo" id="toplist">
            <a target="_blank" href="http://toplist.cz/stat/117144"><script language="JavaScript" type="text/javascript">
                document.write('<img src="http://toplist.cz/count.asp?id=117144&amp;start=806&amp;logo=2&amp;http='
                        +escape(document.referrer)+'&amp;wi='+escape(window.screen.width)+'&he='+escape(window.screen.height)
                        +'&amp;cd='+escape(window.screen.colorDepth)+'" width="36" height="14" border="0" alt="TOPlist statistiky" />');
            </script><noscript><img src="http://toplist.cz/count.asp?id=117144&amp;start=1&amp;logo=2" border="0" alt="TOPlist statistiky" width="36" height="14"/></noscript></a>
        </div>
        <!-- ClustrMaps.com -->
        <div class="pocitadlo" id="clustrmaps">
            <a href="http://www4.clustrmaps.com/user/64952149"><img src="http://www4.clustrmaps.com/stats/maps-no_clusters/ondra.zizka.cz--thumb.jpg" alt="0" border="0" width="180" height="117" /></a>
        </div>
    </div>

</div>

<div id="footer">
    <div class="container">
        <p class="muted credit">&copy; 2018 | Mixed with <a href="http://getbootstrap.com/">Bootstrap v3.3.7</a> | Baked with <a href="http://jbake.org">JBake v2.7.0-SNAPSHOT</a></p>
    </div>
</div>

<script src="../../../js/jquery-1.11.1.min.js"></script>
<script src="../../../js/bootstrap.min.js"></script>
<script src="../../../js/prettify.js"></script>

<!-- Facebook comments -->
<div id="fb-root"></div>
<script>
    (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = 'https://connect.facebook.net/cs_CZ/sdk.js#xfbml=1&version=v3.0';
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-4584951-4"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-4584951-4');
</script>

<!-- Syntax highlighter -->
<script type="text/javascript" src="/syntaxhighlighter3/scripts/shCore.js"></script>
<script type="text/javascript" src="/syntaxhighlighter3/scripts/shBrushBash.js"></script>
<script type="text/javascript" src="/syntaxhighlighter3/scripts/shBrushCpp.js"></script>
<script type="text/javascript" src="/syntaxhighlighter3/scripts/shBrushCSharp.js"></script>
<script type="text/javascript" src="/syntaxhighlighter3/scripts/shBrushCss.js"></script>
<script type="text/javascript" src="/syntaxhighlighter3/scripts/shBrushDelphi.js"></script>
<script type="text/javascript" src="/syntaxhighlighter3/scripts/shBrushDiff.js"></script>
<script type="text/javascript" src="/syntaxhighlighter3/scripts/shBrushGroovy.js"></script>
<script type="text/javascript" src="/syntaxhighlighter3/scripts/shBrushJava.js"></script>
<script type="text/javascript" src="/syntaxhighlighter3/scripts/shBrushJScript.js"></script>
<script type="text/javascript" src="/syntaxhighlighter3/scripts/shBrushPhp.js"></script>
<script type="text/javascript" src="/syntaxhighlighter3/scripts/shBrushPlain.js"></script>
<script type="text/javascript" src="/syntaxhighlighter3/scripts/shBrushPython.js"></script>
<script type="text/javascript" src="/syntaxhighlighter3/scripts/shBrushRuby.js"></script>
<!--
<script type="text/javascript" src="/syntaxhighlighter3/scripts/shBrushScala.js"></script>
-->
<script type="text/javascript" src="/syntaxhighlighter3/scripts/shBrushSql.js"></script>
<script type="text/javascript" src="/syntaxhighlighter3/scripts/shBrushVb.js"></script>
<script type="text/javascript" src="/syntaxhighlighter3/scripts/shBrushXml.js"></script>
<link type="text/css" rel="stylesheet" href="/syntaxhighlighter3/styles/shCore.css"/>
<link type="text/css" rel="stylesheet" href="/syntaxhighlighter3/styles/shThemeDefault.css"/>
<script type="text/javascript">
    SyntaxHighlighter.config.clipboardSwf = '/syntaxhighlighter3/scripts/clipboard.swf';
    SyntaxHighlighter.all();
</script>

</body>
</html>
